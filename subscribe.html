<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <!-- Primary Meta Tags -->
  <title>Subscribe — Stray</title>
  <meta name="title" content="Subscribe — Stray">
  <meta name="description" content="Receive signals from deep space. Subscribe to new transmissions from Stray's navigation logs. No tracking, no algorithms — just a signal when there's something to say.">
  <meta name="keywords" content="subscribe, newsletter, deep space, signals, Stray, updates, notifications">
  <meta name="author" content="Stray">
  <meta name="robots" content="index, follow">
  <link rel="canonical" href="https://stray.space/subscribe.html">
  
  <!-- Language alternates -->
  <link rel="alternate" hreflang="en" href="https://stray.space/subscribe.html">
  <link rel="alternate" hreflang="zh" href="https://stray.space/subscribe.html">
  <link rel="alternate" hreflang="x-default" href="https://stray.space/subscribe.html">
  
  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://stray.space/subscribe.html">
  <meta property="og:title" content="Subscribe — Stray">
  <meta property="og:description" content="Receive signals from deep space. Subscribe to new transmissions.">
  <meta property="og:image" content="https://stray.space/og-image.png">
  <meta property="og:image:width" content="1200">
  <meta property="og:image:height" content="630">
  <meta property="og:image:alt" content="Stray - Subscribe to deep space transmissions">
  <meta property="og:site_name" content="Stray">
  <meta property="og:locale" content="en_US">
  
  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://stray.space/subscribe.html">
  <meta name="twitter:title" content="Subscribe — Stray">
  <meta name="twitter:description" content="Receive signals from deep space. Subscribe to new transmissions.">
  <meta name="twitter:image" content="https://stray.space/og-image.png">
  <meta name="twitter:image:alt" content="Stray - Subscribe to deep space transmissions">
  
  <!-- Additional Meta -->
  <meta name="theme-color" content="#080b12" media="(prefers-color-scheme: dark)">
  <meta name="theme-color" content="#080b12">
  <meta name="color-scheme" content="dark">
  <link rel="icon" type="image/svg+xml" href="/favicon.svg">
  <link rel="alternate icon" href="/favicon.ico">
  <link rel="apple-touch-icon" href="/apple-touch-icon.png">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  
  <!-- RSS Feed -->
  <link rel="alternate" type="application/rss+xml" title="Stray — Navigation Logs" href="/feed.xml">
  
  <!-- Styles -->
  <link rel="stylesheet" href="style.css">
  
  <!-- JSON-LD Structured Data -->
  <script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "@id": "https://stray.space/subscribe.html",
    "name": "Subscribe to Stray",
    "description": "Receive signals from deep space. Subscribe to new transmissions from Stray's navigation logs.",
    "url": "https://stray.space/subscribe.html",
    "isPartOf": {
      "@type": "WebSite",
      "name": "Stray",
      "url": "https://stray.space"
    },
    "breadcrumb": {
      "@type": "BreadcrumbList",
      "itemListElement": [
        {
          "@type": "ListItem",
          "position": 1,
          "name": "航行日志",
          "item": "https://stray.space/"
        },
        {
          "@type": "ListItem",
          "position": 2,
          "name": "接收记录",
          "item": "https://stray.space/subscribe.html"
        }
      ]
    },
    "potentialAction": {
      "@type": "SubscribeAction",
      "target": {
        "@type": "EntryPoint",
        "urlTemplate": "https://stray.space/subscribe.html"
      }
    }
  }
  </script>
  
  <script>document.documentElement.classList.add('js');</script>
</head>
<body>

  <!-- Skip to main content (a11y) -->
  <a href="#main" class="skip-link">跳至内容 / Skip to content</a>

  <div class="cosmos" aria-hidden="true"></div>
  <canvas id="cosmos-canvas" class="cosmos-canvas" aria-hidden="true"></canvas>
  <div class="reception" id="reception" aria-hidden="true"></div>
  <noscript><style>.reception{display:none}</style></noscript>

  <div class="nav-trigger" id="navTrigger" aria-hidden="true"></div>
  <nav class="nav" id="nav" aria-label="主导航 / Main navigation">
    <div class="nav-inner">
      <a href="/">航行日志</a>
      <a href="/about.html">关于信号</a>
      <a href="/subscribe.html" aria-current="page">接收记录</a>
    </div>
  </nav>

  <div class="content">
    <main id="main">

      <section class="opening" aria-label="订阅信号 / Subscribe to signals">
        <article class="entry" id="entry-latest">
          <header>
            <p class="entry-stamp fade-unit">接收信号 / Receive Signals</p>
          </header>
          <div class="entry-body">
            <p class="fade-unit">
              If you'd like to receive transmissions when new logs are recorded, leave a frequency below.
            </p>
            <p class="fade-unit">
              I won't write often. And when I do, it may take a while to arrive.
            </p>
            <p class="fade-unit">
              Light travels fast, but space is very large.
            </p>
            
            <form class="subscribe-form fade-unit" id="subscribeForm" aria-label="订阅表单 / Subscription form">
              <label for="email-input" class="visually-hidden">Email address</label>
              <input 
                type="email" 
                id="email-input"
                name="email" 
                class="subscribe-input" 
                placeholder="your frequency (email)"
                required
                autocomplete="email"
                aria-describedby="subscribe-note"
              >
              <button type="submit" class="subscribe-button" id="submitBtn">
                <span class="btn-text">开始接收 / Begin receiving</span>
                <span class="btn-loading" style="display: none;">正在连接...</span>
              </button>
              <p class="subscribe-error" id="errorMsg" style="display: none; color: #a05050; margin-top: 1.5rem; font-style: italic;" role="alert"></p>
              <p class="subscribe-success" id="successMsg" role="status" aria-live="polite">Signal received. I'll find you.</p>
            </form>

            <p class="subscribe-note fade-unit" id="subscribe-note">
              No tracking. No algorithms.<br>
              Just a signal, when there's something to say.
            </p>
          </div>
        </article>
      </section>

    </main>

    <footer class="end" role="contentinfo">
      <div class="end-space" style="height: 18vh;" aria-hidden="true"></div>
      <a href="/" class="end-link" aria-label="返回航行日志 / Back to navigation logs">返回航行</a>
      <p class="end-sig">
        Stray<br>
        <span aria-label="Somewhere past the heliosphere">深空某处</span>
      </p>
    </footer>
  </div>

  <script src="script.js"></script>
  <script src="cosmos.js"></script>
  <script>
    (function() {
      'use strict';
      
      var form = document.getElementById('subscribeForm');
      var input = document.getElementById('email-input');
      var submitBtn = document.getElementById('submitBtn');
      var btnText = submitBtn.querySelector('.btn-text');
      var btnLoading = submitBtn.querySelector('.btn-loading');
      var errorMsg = document.getElementById('errorMsg');
      var successMsg = document.getElementById('successMsg');
      
      if (!form) return;
      
      form.addEventListener('submit', async function(e) {
        e.preventDefault();
        
        var email = input.value.trim();
        if (!email) return;
        
        // Reset states
        errorMsg.style.display = 'none';
        errorMsg.textContent = '';
        
        // Show loading
        btnText.style.display = 'none';
        btnLoading.style.display = 'inline';
        submitBtn.disabled = true;
        input.disabled = true;
        
        try {
          var response = await fetch('/api/subscribe', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ 
              email: email,
              source: 'stray.space'
            })
          });
          
          var data = await response.json();
          
          if (data.success) {
            form.classList.add('submitted');
            successMsg.focus();
          } else {
            throw new Error(data.error || 'Transmission failed');
          }
          
        } catch (error) {
          // Show error
          errorMsg.textContent = error.message || 'Signal lost. Please try again.';
          errorMsg.style.display = 'block';
          
          // Reset button
          btnText.style.display = 'inline';
          btnLoading.style.display = 'none';
          submitBtn.disabled = false;
          input.disabled = false;
        }
      });
    })();
  </script>
  
  <!-- Visually hidden utility (for form labels) -->
  <style>
    .visually-hidden {
      position: absolute;
      width: 1px;
      height: 1px;
      padding: 0;
      margin: -1px;
      overflow: hidden;
      clip: rect(0, 0, 0, 0);
      white-space: nowrap;
      border: 0;
    }
  </style>
</body>
</html>
